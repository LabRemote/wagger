"use strict";class Disp{constructor(){this.data=[]}static rGBAArrayFromLiteral(t){let e=[];-1!==t.search(/rgb/)&&(e=t.match(/([0-9]+\.?[0-9]*)/g)),3===e.length&&e.push(1);for(let t=0;t<e.length;t++)e[t]=parseInt(e[t],10);return e[3]*=255,e}static rGBALiteralFromArray(t){return"rgba("+t[0].toString()+","+t[1].toString()+","+t[2].toString()+","+(t[3]/255).toString()+")"}static setProperties(t,e){for(let i in e)t[i]=e[i]}static getProperty(t,e){return window.getComputedStyle(t,null).getPropertyValue(e)}static addFonts(t,e){let i="";for(let s=0;s<t.length;s++){let l=t[s],n=l.split("."),r=n[n.length-1];"ttf"===r&&(r="truetype");let a=n[0],h=new FontFace(a,"url(."+e+l+") format('"+r+"')");h.load().then(function(){document.fonts.add(h)}).catch(t=>console.error(t.message)),i+="'"+a+"'",s<t.length-1&&(i+=", ")}return i}static getTagChannelIndex(t){let e=t.id.split("_"),i=null,s=null;return e.length>0&&(i=e[0],e.length>1&&(s=e[1])),[i,s]}static getChannelElement(t){let e=null,i=null;t.length>0&&(e=t[0],t.length>1&&(i=t[1]));let s=null,l=e;return null!==l&&(null!==i&&(l+="_"+i),s=document.getElementById(l)),s}static removeAllElements(t){let e=t.getElementsByTagName("BUTTON");for(let t=0,i=e.length;t!=i;++t)e[0].parentNode.removeChild(e[0]);let i=t.getElementsByTagName("DIV");for(let t=0,e=i.length;t!=e;++t)i[0].parentNode.removeChild(i[0]);let s=t.getElementsByTagName("INPUT");for(let t=0,e=s.length;t!=e;++t)s[0].parentNode.removeChild(s[0]);let l=t.getElementsByTagName("OUTPUT");for(let t=0,e=l.length;t!=e;++t)l[0].parentNode.removeChild(l[0])}static htmlSpaces(t){let e="";for(let i=0;i<t;i++)e+="&nbsp;";return e}static getTimeLagText(t){let e="";return e=t>31536e3?parseInt(t/31536e3).toString()+" y":t>86400?parseInt(t/86400).toString()+" d":t>3600?parseInt(t/3600).toString()+" h":t>60?parseInt(t/60).toString()+" m":parseInt(t/1).toString()+" s"}setDisplayTextProperties(t,e,i,s,l,n){this.setAllTextAlpha(t,l);let r=this.data[t].screens[0],a="",h="";null!==e&&([a,h]=Disp.getTagChannelIndex(e));let _=r.time;if(null!==_){let t=Disp.getChannelElement(["timelabel",null]);t.innerHTML=_.str_val+_.padding,"timebkg"===a&&(t.innerHTML=_.str_val+_.info+(-i/1e6).toString().substring(0,7)+" s")}for(let e=0;e<r.channels.length;e++){let i=r.channels[e],l=i.index.toString();h===l&&this.setAllTextAlpha(t,255);let n=Disp.getChannelElement(["label",l]);n.innerHTML=i.str_val+i.padding,h===l&&(n.innerHTML=i.val.toString().substring(0,s)+" "+i.unit+i.info)}for(let t=0;t<r.img_channels.length;t++);for(let e=0;e<r.ctrl_channels.length;e++){let i=r.ctrl_channels[e],s=i.index.toString();h===s&&this.setAllTextAlpha(t,255);let l=Disp.getChannelElement(["setval",s]);if(l.innerHTML=i.str_val+i.padding,h===s){l.innerHTML=i.str_val+i.info,Disp.getChannelElement(["slider",s]).value=i.val}}}setAllTextAlpha(t,e){let i=this.data[t].screens[0];for(let t=0;t<i.channels.length;t++){let s=i.channels[t].index.toString(),l=Disp.getChannelElement(["label",s]),n=Disp.getProperty(l,"color"),r=Disp.rGBAArrayFromLiteral(n);r[3]=e,l.style.color=Disp.rGBALiteralFromArray(r)}}placeAndSizeTextElements(){}setControlElementStyle(){}}class App{constructor(){this.CANVAS={},this.CANVAS_POS_X=250,this.CANVAS_POS_Y=10,this.STD_SCALE_HEIGHT=480,this.DISPLAY_SELECT={},this.DISPLAY_INFO_TEXT={},this.DISPLAY_TIMEOUT_TEXT={},this.STANDARD_FONT_FAMILIES="'Arial', 'Verdana'",this.STANDARD_FONTSIZE=14,this.WARNING_FONTSIZE=36,this.TIMEOUT_FONTSIZE=14,this.MAX_DISPLAY_DIGITS=13,this.STANDARD_FOREGROUND_COLOR=[255,255,255,255],this.STANDARD_BACKGROUND_COLOR=[0,0,255,255],this.FRAME_RATE=5,this.REQUEST_INTERVAL=2,this.NTP_SYNC_INTERVAL=60,this.TIME_ZONE="UTC",this.BROWSER_URL=window.location.hostname,this.CLIENT_URL="http://"+this.BROWSER_URL+"/client/",this.FILES_DIR="images/",this.FILES_URL=this.CLIENT_URL+this.FILES_DIR,this.WAIT_MESSAGE="Retrieving data...",this.last_get=5,this.last_request=0,this.last_time_sync=0,this.display_index=0,this.display_timeout=900,this.display_viewport={},this.display_viewport.w=853,this.display_viewport.h=480,this.display_img_scale=1,this.display_kiosk_interval=0,this.display_kiosk_adjust={},this.display_kiosk_adjust.x=0,this.display_kiosk_adjust.y=0,this.display_kiosk_height=0,this.display_is_static=!1,this.display_timed_out=!1,this.display_override_font={},this.display_override_font.filename="",this.display_override_font.path="",this.all_font_families="",this.text_element_alpha=255,this.chan_index_string="",this.img_chan_index_string="",this.ctrl_chan_index_string="",this.img_url="",this.img={},this.test_img={},this.img_height=this.STD_SCALE_HEIGHT,this.img_width=4/3*this.img_height,this.start_time=-9999,this.end_time=-9999,this.time_bins=10,this.time_bin_size=1,this.data_time_string="",this.data_timestamp=0,this.server_time_string=this.WAIT_MESSAGE,this.server_timestamp=0,this.frames_active=0,this.saved_frames=0,this.ntp={},this.ntp.t1=0,this.ntp.t2=0,this.ntp.t3=0,this.ntp.t4=0,this.ntp.adjustment=0,this.ntp.timestamp=0,this.ntp.time_string=0,this.canvas_shift_x=0,this.canvas_shift_y=0,this.moved_slider=null,this.pressed_send=null,this.hovered_clicked_label=null}static arrayElementsIn(t){return!(!Array.isArray(t)||!t.length)}static isValidNumber(t){let e=parseFloat(t);return!isNaN(t)&&!isNaN(e)&&isFinite(e)}static isValidGT(t,e){return!(!App.isValidNumber(t)||!App.isValidNumber(e))&&parseFloat(t)>parseFloat(e)}static isValidDate(t){let e=!1;return"[object Date]"===Object.prototype.toString.call(t)&&(isNaN(t.getTime())||(e=!0)),e}static maxOfArray(t){return Math.max(...t.map(t=>Array.isArray(t)?maxOfArray(t):t))}static nthMaxOfArray(t,e){let i=App.maxOfArray(t);t.length-e<1&&(e+=t.length-e-1),e<0&&(e=0);for(let s=0;s<e;s+=1){let e=t.indexOf(i);e>-1&&t.splice(e,1),i=App.maxOfArray(t)}return i}static findWithAttr(t,e,i){for(let s=0;s<t.length;s+=1)if(t[s][e]===i)return s;return-1}}