"use strict";let App=new AppData,Display=new DisplayData;function setup(){frameRate(App.FRAME_RATE),App.ntp.t1=parseInt(1e3*(new Date).valueOf()),httpGet(App.CLIENT_URL+"server_time.php","json",{},handle_server_time);let e={screen_layout_file:document.getElementById("screenLayoutFile").value};httpGet(App.CLIENT_URL+"get_screen_data.php","json",e,handle_display_data),App.img_url=App.FILES_URL+"0.png",App.img=loadImage(App.img_url,handle_image_loaded),App.img_width=1280/(720/App.STD_SCALE_HEIGHT),App.img_height=720/(720/App.STD_SCALE_HEIGHT),App.CANVAS=createCanvas(1500,800),App.CANVAS.parent("myContainer"),App.CANVAS.position(App.CANVAS_POS_X,App.CANVAS_POS_Y),App.all_font_families=addFonts(["carlito.woff"],"/fonts/")+", "+App.STANDARD_FONT_FAMILIES}function draw(){if(App.frames_active++,App.frames_active<App.display_timeout*App.FRAME_RATE&&void 0!==App.DISPLAY_SELECT.style){if(App.DISPLAY_SELECT.style.visibility="visible",App.display_kiosk_interval>0&&App.frames_active%(App.display_kiosk_interval*App.FRAME_RATE)==0){App.display_index++,App.display_index>=Display.data.length&&(App.display_index=0),App.DISPLAY_SELECT.value=App.display_index.toString();let e=new Event("change");App.DISPLAY_SELECT.dispatchEvent(e)}App.img=loadImage(App.img_url,handle_image_loaded);let e=null;if(void 0!==Display.data[App.display_index]&&(e=Display.data[App.display_index].screens[0]),null!==e){let t="",i="";null!==App.hovered_clicked_label&&([t,i]=getTagChannelIndex(App.hovered_clicked_label));let p=e.time;if(null!==p){let e=getChannelElement(["timelabel",null]);e.innerHTML=p.str_val+p.padding,"timebkg"===t&&(e.innerHTML=p.str_val+p.info+(-App.ntp.adjustment/1e6).toString().substring(0,7)+" s")}for(let t=0;t<e.channels.length;t++){let p=e.channels[t],n=p.index.toString(),l=getChannelElement(["label",n]);l.innerHTML=p.str_val+p.padding,i===n&&(l.innerHTML=p.val.toString().substring(0,App.MAX_DISPLAY_DIGITS)+" "+p.unit+p.info)}for(let t=0;t<e.img_channels.length;t++);for(let t=0;t<e.ctrl_channels.length;t++){let p=e.ctrl_channels[t],n=p.index.toString(),l=getChannelElement(["setval",n]);if(l.innerHTML=p.str_val+p.padding,i===n){l.innerHTML=p.str_val+p.info,getChannelElement(["slider",n]).value=p.val}}}}if(frameCount-App.last_time_sync>=App.NTP_SYNC_INTERVAL*App.FRAME_RATE&&App.frames_active<App.display_timeout*App.FRAME_RATE&&!1===App.display_is_static&&(App.ntp.t1=parseInt(1e3*(new Date).valueOf()),httpGet(App.CLIENT_URL+"server_time.php","json",{},handle_server_time),App.last_time_sync=frameCount),frameCount-App.last_request>=App.REQUEST_INTERVAL*App.FRAME_RATE&&App.frames_active<App.display_timeout*App.FRAME_RATE&&!1===App.display_is_static){if(""!==App.chan_index_string){let e={channels:App.chan_index_string,start_time:App.start_time,end_time:App.end_time,duration:App.time_bins,unit:App.time_bin_size,delete_horizon:3600};httpPost(App.CLIENT_URL+"send_request.php","json",e,handle_request_data)}if(""!==App.img_chan_index_string){let e={channels:App.img_chan_index_string,start_time:App.start_time,end_time:App.end_time,duration:App.time_bins,unit:App.time_bin_size,delete_horizon:3600};httpPost(App.CLIENT_URL+"send_request.php","json",e,handle_request_data)}App.last_request=frameCount}if(frameCount-App.last_get>=App.REQUEST_INTERVAL*App.FRAME_RATE&&App.frames_active<App.display_timeout*App.FRAME_RATE&&!1===App.display_is_static){if(""!==App.ctrl_chan_index_string){let e={channels:App.ctrl_chan_index_string,start_time:App.start_time,end_time:App.end_time,duration:-9999,unit:App.time_bin_size,lowest_status:1};httpPost(App.CLIENT_URL+"get_uploaded.php","json",e,handle_get_data)}if(""!==App.chan_index_string){let e={channels:App.chan_index_string,start_time:App.start_time,end_time:App.end_time,duration:App.time_bins,unit:App.time_bin_size,lowest_status:0};httpPost(App.CLIENT_URL+"get_uploaded.php","json",e,handle_get_data)}if(""!==App.img_chan_index_string){let e={channels:App.img_chan_index_string,start_time:App.start_time,end_time:App.end_time,duration:App.time_bins,unit:App.time_bin_size,lowest_status:0};httpPost(App.CLIENT_URL+"get_uploaded.php","json",e,handle_get_data)}App.last_get=frameCount}if(null!==App.pressed_send&&null!==App.moved_slider&&!1===App.display_is_static){let e={channels:App.moved_slider.id.split("_")[1]+";",start_time:App.start_time,end_time:App.end_time,value:App.moved_slider.value,duration:0,unit:1,delete_horizon:10};App.moved_slider=null,App.pressed_send=null,httpPost(App.CLIENT_URL+"send_request.php","json",e,handle_control_request_data)}if(App.ntp.timestamp=parseInt((new Date).valueOf()/1e3)+App.ntp.adjustment/1e6,void 0!==App.DISPLAY_SELECT.style&&!App.display_timed_out)if(App.frames_active>=App.display_timeout*App.FRAME_RATE)App.display_timed_out=!0,background(255),removeAllElements(App.CONTAINER),App.img=loadImage(App.FILES_URL+"000.jpg",handle_image_loaded),App.img_width=1280/(720/App.STD_SCALE_HEIGHT),App.img_height=720/(720/App.STD_SCALE_HEIGHT),App.DISPLAY_INFO_TEXT=document.createElement("DIV"),App.CONTAINER.appendChild(App.DISPLAY_INFO_TEXT),App.DISPLAY_INFO_TEXT.innerHTML="Timeout due to inactivity - please reload page to continue data transfer!",setAttributes(App.DISPLAY_INFO_TEXT.style,{width:parseInt(App.img_width).toString()+"px",height:parseInt(App.WARNING_FONTSIZE).toString()+"px",position:"absolute",left:parseInt(App.CANVAS_POS_X+App.canvas_shift_x+Math.max(App.img_width/2-7*App.WARNING_FONTSIZE,0)).toString()+"px",top:parseInt(App.CANVAS_POS_Y+App.canvas_shift_y+App.img_height/2-App.WARNING_FONTSIZE/2).toString()+"px",fontSize:16..toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral(App.STANDARD_FOREGROUND_COLOR),textAlign:"left",visibility:"visible"}),reset_display_variables();else if(!1===App.display_is_static){App.DISPLAY_INFO_TEXT.innerHTML="",App.DISPLAY_INFO_TEXT.style.visibility="hidden";let e=App.ntp.timestamp-App.data_timestamp;if(e>App.time_bins*App.time_bin_size||!navigator.onLine)if(App.frames_active%2==0?App.DISPLAY_INFO_TEXT.style.color=getRGBALiteral([255,0,0,127]):App.DISPLAY_INFO_TEXT.style.color=getRGBALiteral([255,255,255,127]),!isValidNumber(e)||e>31536e4);else{let t=getTimeLagText(e),i="requesting new...";navigator.onLine||(i="no internet connection!"),App.DISPLAY_INFO_TEXT.innerHTML="Out of date ("+t+"), "+i,App.DISPLAY_INFO_TEXT.style.visibility="visible"}}}function handle_image_loaded(){let e={};e[0]=App.img;for(let t=0;t<=0;t++)image(e[t],App.canvas_shift_x,App.canvas_shift_y,App.img_width*(1-.5*t),App.img_height*(1-.5*t))}function handle_server_time(e){App.ntp.t2=parseInt(e.receivetime/1),App.ntp.t3=parseInt(e.transmittime/1),App.ntp.t4=parseInt(1e3*(new Date).valueOf()),App.ntp.adjustment=parseInt((App.ntp.t2-App.ntp.t1+(App.ntp.t3-App.ntp.t4))/2)}function handle_control_request_data(e){}function handle_request_data(e){}function handle_image_request_data(e){}function handle_get_data(e){let t=e.returnstring.split(";"),i=(t.length-1)/2,p="",n="",l=n.split(","),s=[],a=[];for(let e=0;e<i;e++){p=t[2*e];let i=((l=(n=t[2*e+1]).split(",")).length-1)/4-0,_=[],r=[],d=[];for(let e=0;e<i;e++)_[e]=parseInt(l[4*e+0]),r[e]=parseFloat(l[4*e+1]),d[e]=l[4*e+3];s.push(_);let A=parseInt(p);a.push([A,r])}populate_display_variables(s,a)}function populate_display_variables(e,t){let i=App.ntp.timestamp;if(isValidGT(i,0)){App.server_timestamp=i;let p=new Date(1e3*i),n="";isValidDate(p)?(n=p.toISOString(),App.ntp.time_string=n.substring(0,10).concat(" ",n.substring(11,19)," ",App.TIME_ZONE),App.server_time_string=App.ntp.time_string):App.server_time_string=App.WAIT_MESSAGE;let l=Display.data[App.display_index].screens[0],s=l.time;null!==s&&(s.str_val=App.server_time_string,s.val=App.server_timestamp);let a=nthMaxOfArray(e[0],0);if(isValidGT(a,0)){App.data_timestamp=a;let e=new Date(1e3*a),i="";isValidDate(e)?(i=e.toISOString(),App.data_time_string=i.substring(0,10).concat(" ",i.substring(11,19)," ",App.TIME_ZONE)):App.data_time_string=App.WAIT_MESSAGE;for(let e=0;e<l.img_channels.length;e++){let t=l.img_channels[e],i=App.FILES_URL+t.index.toString()+"_"+a.toString()+"."+t.ext;App.img_url=i,App.img=loadImage(i,handle_image_loaded);let p=t.dim.h/t.disp.h;App.display_kiosk_height>0&&(p=t.dim.h/App.display_kiosk_height);t.dim.h,t.dim.w}for(let e=0;e<l.channels.length;e++){let i=l.channels[e],p=findWithAttr(t,0,i.index);if(p>-1){let e=t[p][1],n=e[e.length-1];i.val=n*i.scale,isValidNumber(i.val)?i.str_val=i.val.toString().substring(0,i.disp.len)+" "+i.unit:i.str_val=App.WAIT_MESSAGE}}for(let e=0;e<l.ctrl_channels.length;e++){let i=l.ctrl_channels[e],p=findWithAttr(t,0,i.index);if(p>-1){let e=t[p][1],n=e[e.length-1];i.val=n*i.scale,isValidNumber(i.val)?i.str_val=i.val.toString().substring(0,i.disp.len)+" "+i.unit:i.str_val=App.WAIT_MESSAGE}}}}}function reset_display_variables(){App.server_time_string=App.WAIT_MESSAGE,App.data_timestamp=App.ntp.timestamp;let e=Display.data[App.display_index].screens[0];if(null!==e.time){App.display_is_static=!1;for(let t=0;t<e.channels.length;t++)e.channels[t].str_val=App.WAIT_MESSAGE}else App.display_is_static=!0}function mousePressed(){}function circle_button(e,t,i){dist(mouseX,mouseY,e,t);ellipseMode(CENTER),stroke(0,0),strokeWeight(i/4),stroke(0,0),ellipse(e,t,i,i)}function handle_display_data(e){Display.data=e.displays,void 0!==e.disp_timeout&&(App.display_timeout=e.disp_timeout),void 0!==e.disp_kiosk_interval&&(App.display_kiosk_interval=e.disp_kiosk_interval),void 0!==e.disp_kiosk_adjust&&(App.display_kiosk_adjust=e.disp_kiosk_adjust),void 0!==e.disp_kiosk_override_height&&(App.display_kiosk_height=e.disp_kiosk_override_height),document.title="LabRemote",App.CONTAINER=document.getElementById("myContainer"),App.DISPLAY_SELECT=document.createElement("SELECT"),App.DISPLAY_SELECT.id="screen_select",App.CONTAINER.appendChild(App.DISPLAY_SELECT);for(let e=0;e<Display.data.length;e++)App.DISPLAY_SELECT.options[App.DISPLAY_SELECT.options.length]=new Option(Display.data[e].title,e);App.DISPLAY_SELECT.addEventListener("change",display_select_listener),setAttributes(App.DISPLAY_SELECT.style,{position:"absolute",left:"10px",top:"10px",visibility:"hidden"}),display_select_listener()}function label_listener(){let e=this;if(void 0!==e){App.hovered_clicked_label=e,e.style.visibility="visible";let[t,i]=getTagChannelIndex(e);if("timebkg"===t){let e=getChannelElement(["timelabel",null]);if(null!==e){e.style.visibility="visible";let t=Display.data[App.display_index].screens[0].time,i=t.str_val+t.info;e.innerHTML=i+(-App.ntp.adjustment/1e6).toString().substring(0,7)+" s"}}let p=getChannelElement(["setval",i]);if(null!==p){p.style.visibility="visible";let e=Display.data[App.display_index].screens[0].ctrl_channels,t=e[findWithAttr(e,"index",parseInt(i))],n="",l=(n=""!==t.str_val?t.str_val:(t.val*t.scale).toString().substring(0,t.disp.len)+" "+t.unit)+t.info;p.innerHTML=l;let s=getChannelElement(["slider",i]);null!==s&&(s.style.visibility="visible",s.value=t.val);let a=getChannelElement(["send",i]);null!==a&&(a.style.visibility="visible")}let n=getChannelElement(["label",i]);if(null!==n){n.style.visibility="visible";let e=Display.data[App.display_index].screens[0].channels,t=e[findWithAttr(e,"index",parseInt(i))],p="",l=(p=t.val.toString().substring(0,App.MAX_DISPLAY_DIGITS)+" "+t.unit)+t.info;n.innerHTML=l}}}function outside_label_listener(){let e=this;if(void 0!==e){App.hovered_clicked_label=null,e.style.visibility="hidden";let[t,i]=getTagChannelIndex(e);if("timebkg"===t){let e=getChannelElement(["timelabel",null]);if(null!==e){let t=Display.data[App.display_index].screens[0].time.str_val;e.innerHTML=t+htmlSpaces(0)+"<br>"+htmlSpaces(10)}}let p=getChannelElement(["send",i]);null!==p&&(p.style.visibility="hidden");let n=getChannelElement(["slider",i]);null!==n&&(n.style.visibility="hidden");let l=getChannelElement(["setval",i]);if(null!==l){let e=Display.data[App.display_index].screens[0].ctrl_channels,t=e[findWithAttr(e,"index",parseInt(i))],p="";p=""!==t.str_val?t.str_val:(t.val*t.scale).toString().substring(0,t.disp.len)+" "+t.unit,l.innerHTML=p+htmlSpaces(0)+"<br>"+htmlSpaces(10)}let s=getChannelElement(["label",i]);if(null!==s){let e=Display.data[App.display_index].screens[0].channels,t=e[findWithAttr(e,"index",parseInt(i))],p="";p=""!==t.str_val?t.str_val:(t.val*t.scale).toString().substring(0,t.disp.len)+" "+t.unit,s.innerHTML=p+htmlSpaces(0)+"<br>"+htmlSpaces(10)}}}function send_listener(){let e=this;void 0!==e&&(e.disabled=!0,e.style.opacity="0.5",App.pressed_send=e)}function slider_listener(){let e=this;if(void 0!==e){let[t,i]=getTagChannelIndex(e),p=getChannelElement(["setval",i]),n=getChannelElement(["send",i]),l=parseInt(i),s=parseFloat(e.value);n.disabled=!1,n.style.opacity="1.0";let a=[],_=Display.data[App.display_index].screens[0].ctrl_channels;for(let e=0;e<_.length;e++)_[e].index===l&&(a=_[e]);let r="";""!==a.min_str_val&&""!==a.max_str_val&&""!==a.str_val?(r=a.min_str_val,s>.5&&(r=a.max_str_val)):r=(s*a.scale).toString().substring(0,a.disp.len)+" "+a.unit,a.str_val=r,a.val=s,r+=a.info,p.innerHTML=r,App.moved_slider=e}}function display_select_listener(){if(background(255),0===App.display_kiosk_interval)App.frames_active=0;else{let e=App.display_kiosk_adjust;window.scrollTo(App.CANVAS_POS_X+e.x,App.CANVAS_POS_Y+e.y)}App.channel_strings_array=[],removeAllElements(App.CONTAINER),App.display_index=parseInt(App.DISPLAY_SELECT.options[App.DISPLAY_SELECT.selectedIndex].value);let e=Display.data[App.display_index].screens[0],t=e.imgs.length;if(t>0){for(let i=0;i<t;i++){let t=e.imgs[i];0===i&&(App.img_url=App.FILES_URL+t.file.toString());let p=t.dim.h/t.disp.h;App.display_kiosk_height>0&&(p=t.dim.h/App.display_kiosk_height),App.img_height=t.dim.h/p,App.img_width=t.dim.w/p,App.canvas_shift_x=t.disp.pos.x,App.canvas_shift_y=t.disp.pos.y}App.img=loadImage(App.img_url,handle_image_loaded)}else App.img_url=App.FILES_URL+"00.jpg",App.img=loadImage(App.img_url,handle_image_loaded);App.DISPLAY_INFO_TEXT=document.createElement("DIV"),App.CONTAINER.appendChild(App.DISPLAY_INFO_TEXT),setAttributes(App.DISPLAY_INFO_TEXT.style,{width:parseInt(App.img_width).toString()+"px",height:parseInt(App.WARNING_FONTSIZE).toString()+"px",position:"absolute",left:parseInt(App.CANVAS_POS_X+App.canvas_shift_x+Math.max(App.img_width/2-7*App.WARNING_FONTSIZE,0)).toString()+"px",top:parseInt(App.CANVAS_POS_Y+App.canvas_shift_y+App.img_height/2-App.WARNING_FONTSIZE/2).toString()+"px",fontSize:parseInt(App.WARNING_FONTSIZE).toString()+"px",fontFamily:App.all_font_families,textAlign:"left",visibility:"hidden"}),App.DISPLAY_INFO_TEXT.id="infotext";let i=e.time;if(null!==i){App.time_bins=i.bins,App.time_bin_size=i.bin_size;let e=i.disp,t=e.col,p=e.bgcol,n=document.createElement("DIV");App.CONTAINER.appendChild(n);let l=document.createElement("BUTTON");n.appendChild(l),l.innerHTML="";let s=document.createTextNode("");l.appendChild(s),n.title="",setAttributes(n.style,{width:(14.1*e.size).toString()+"px",height:(4.1*e.size+4).toString()+"px",position:"absolute",left:(e.pos.x+App.CANVAS_POS_X-e.size/2+1).toString()+"px",top:(e.pos.y+App.CANVAS_POS_Y-e.size+1).toString()+"px",visibility:"hidden",fontSize:e.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([t.r,t.g,t.b,t.a]),backgroundColor:getRGBALiteral([p.r,p.g,p.b,p.a])}),l.title="",setAttributes(l.style,{position:"absolute",left:(.33*e.size).toString()+"px",top:(.34*e.size).toString()+"px",visibility:"visible",fontSize:e.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([t.r,t.g,t.b,t.a]),backgroundColor:"transparent",border:"transparent",outline:"none",textAlign:"left"}),n.id="timebkg",l.id="timelabel",n.addEventListener("mouseover",label_listener),n.addEventListener("mouseleave",outside_label_listener),i.info=htmlSpaces(0)+"<br>Last server response (NTP)<br>Client time offset: ",i.padding=htmlSpaces(5)+"<br>"+htmlSpaces(10)}let p=e.channels.length;App.chan_index_string="";for(let t=0;t<p;t++){let i=e.channels[t],p=i.disp,n=p.bgcol,l=p.col,s=i.index.toString();App.chan_index_string+=s+";";let a=document.createElement("DIV");App.CONTAINER.appendChild(a);let _=document.createElement("BUTTON");a.appendChild(_),_.innerHTML="";let r=document.createTextNode("");_.appendChild(r),a.title="",setAttributes(a.style,{width:(13.9*p.size).toString()+"px",height:(4.1*p.size+4).toString()+"px",position:"absolute",left:(p.pos.x+App.CANVAS_POS_X-p.size/2+1).toString()+"px",top:(p.pos.y+App.CANVAS_POS_Y-p.size+1).toString()+"px",visibility:"hidden",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([l.r,l.g,l.b,l.a]),backgroundColor:getRGBALiteral([n.r,n.g,n.b,n.a])}),_.title="",setAttributes(_.style,{position:"absolute",left:(.33*p.size).toString()+"px",top:(.34*p.size).toString()+"px",visibility:"visible",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([l.r,l.g,l.b,l.a]),backgroundColor:"transparent",border:"transparent",outline:"none",textAlign:"left"}),a.id="chanbkg_"+s,_.id="label_"+s,a.addEventListener("mouseover",label_listener),a.addEventListener("mouseleave",outside_label_listener),i.info=htmlSpaces(0)+"<br>"+i.label.toString()+"<br>Measurement channel "+s,i.padding=htmlSpaces(5)+"<br>"+htmlSpaces(10)}let n=e.img_channels.length;App.img_chan_index_string="";for(let t=0;t<n;t++){let i=e.img_channels[t],p=i.index.toString(),n=i.dim.h/i.disp.h;App.display_kiosk_height>0&&(n=i.dim.h/App.display_kiosk_height),App.img_chan_index_string+=p+";",App.img_height=i.dim.h/n,App.img_width=i.dim.w/n,App.canvas_shift_x=i.disp.pos.x,App.canvas_shift_y=i.disp.pos.y}let l=e.ctrl_channels.length;App.ctrl_chan_index_string="";for(let t=0;t<l;t++){let i=e.ctrl_channels[t],p=i.disp,n=p.col,l=p.bgcol,s=i.index.toString();App.ctrl_chan_index_string+=s+";";let a=document.createElement("DIV");App.CONTAINER.appendChild(a);let _=document.createElement("INPUT"),r=document.createElement("BUTTON"),d=document.createElement("BUTTON");a.appendChild(_),a.appendChild(r),a.appendChild(d);let A=document.createTextNode("");r.appendChild(A),a.title="",setAttributes(a.style,{width:(10.8*p.size).toString()+"px",height:(8.2*p.size).toString()+"px",position:"absolute",left:(p.pos.x+App.CANVAS_POS_X-p.size/2+7).toString()+"px",top:(p.pos.y+App.CANVAS_POS_Y-p.size+14).toString()+"px",visibility:"hidden",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([n.r,n.g,n.b,n.a]),backgroundColor:getRGBALiteral([l.r,l.g,l.b,l.a])}),_.title="",setAttributes(_.style,{width:(9*p.size).toString()+"px",height:(1.8*p.size).toString()+"px",position:"absolute",left:(.7*p.size).toString()+"px",top:(.6*p.size).toString()+"px",visibility:"hidden",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families}),r.title="",setAttributes(_.style,{position:"absolute",left:(.38*p.size).toString()+"px",top:(3*p.size).toString()+"px",visibility:"visible",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families,color:getRGBALiteral([n.r,n.g,n.b,n.a]),backgroundColor:"transparent",border:"transparent",outline:"none",textAlign:"left"}),d.title="",d.disabled=!0,setAttributes(d.style,{width:(2.7*p.size).toString()+"px",height:(1.6*p.size).toString()+"px",position:"absolute",left:(7.3*p.size).toString()+"px",top:(3.1*p.size).toString()+"px",visibility:"hidden",fontSize:p.size.toString()+"px",fontFamily:App.all_font_families,borderRadius:"10%",opacity:"0.5",textAlign:"center"}),a.id="ctrlbkg_"+s,_.id="slider_"+s,r.id="setval_"+s,d.id="send_"+s,a.addEventListener("mouseover",label_listener),a.addEventListener("mouseleave",outside_label_listener),setAttributes(_,{type:"range",min:i.min_val,max:i.max_val,step:i.val_step,value:i.val}),_.addEventListener("input",slider_listener);let o="";""!==i.min_str_val&&""!==i.max_str_val&&""!==i.str_val?(setAttributes(_,{min:0,max:1,step:1,value:0}),o=i.min_str_val):o=(i.val*i.scale).toString().substring(0,i.disp.len)+" "+i.unit,setAttributes(i,{str_val:o,info:htmlSpaces(0)+"<br>"+htmlSpaces(10)+"<br>"+i.label.toString()+"<br>Control channel "+s,padding:htmlSpaces(0)+"<br>"+htmlSpaces(10)+"<br>"+htmlSpaces(10)}),r.innerHTML=o+i.padding,d.addEventListener("click",send_listener),d.innerHTML="Go"}reset_display_variables()}